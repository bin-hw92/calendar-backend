let axios,converter;_8ae‍.x([["list",()=>list]]);_8ae‍.w("axios",[["default",["axios"],function(v){axios=v}]]);_8ae‍.w("xlm-js",[["*",null,function(v){converter=v}]]);


const baseUrl = 'http://apis.data.go.kr/B090041/openapi/service/SpcdeInfoService/getRestDeInfo';
const key = 'lmnMzwQlnsZP69lA0Csu%2Fk%2FYOFiMsZnm81VFiPDq8BWc8j5LzW0QYlhOEBn8xsVbSzDRZOwYn7lIXXFdJG%2FBlw%3D%3D';

       const list = async ctx => {
    const year = ctx.query.year || ''+new Date().getFullYear;
    const month = ctx.query.month ||  ("0" + (1 + new Date().getMonth())).slice(-2);
    if(year.length < 1 || month.length < 1){
        ctx.status = 400;
        return;
    }
    try{
        _8ae‍.g.console.log(axios.get(`${baseUrl}?solYear=${year}&solMonth=${month}&ServiceKey=${key}`), "@@@@@@@$$$$$@");
        const response = await axios.get(`${baseUrl}?solYear=${year}&solMonth=${month}&ServiceKey=${key}`);
        _8ae‍.g.console.log(response, "@@@");
        const xmlToJson = converter.xml2json();
    }catch(e){
        ctx.throw(500, e);
    }
};